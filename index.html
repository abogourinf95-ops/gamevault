<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GameVault</title>

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background:
    linear-gradient(rgba(0,0,0,.75), rgba(0,0,0,.9)),
    url("https://images.unsplash.com/photo-1542751371-adc38448a05e");
  background-size: cover;
  background-attachment: fixed;
  color: #fff;
}

header {
  padding: 25px;
  text-align: center;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(6px);
}

header h1 {
  color: #ff9800;
  font-size: 2.5em;
  margin-bottom: 10px;
}

.search-box {
  max-width: 500px;
  margin: 20px auto;
  position: relative;
}

.search-box input {
  width: 100%;
  padding: 14px 45px 14px 15px;
  border-radius: 30px;
  border: none;
  font-size: 16px;
  outline: none;
}

.search-box span {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 20px;
  color: #555;
}

.notice {
  margin: 20px;
  padding: 15px;
  background: #ff9800;
  color: #000;
  text-align: center;
  border-radius: 10px;
  font-weight: bold;
}

.grid {
  padding: 30px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: 25px;
}

.card {
  background: rgba(0,0,0,0.75);
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 10px 25px rgba(0,0,0,0.7);
  transition: transform .3s, box-shadow .3s;
}

.card:hover {
  transform: translateY(-8px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.9);
}

.card img {
  width: 100%;
  height: 160px;
  object-fit: cover;
}

.card h3 {
  padding: 12px;
  font-size: 16px;
  color: #ffcc00;
}

.card a, .card button {
  display: block;
  margin: 10px;
  padding: 10px;
  border-radius: 8px;
  font-weight: bold;
  text-align: center;
  cursor: pointer;
  border: none;
  text-decoration: none;
}

.card a {
  background: #2196f3;
  color: #fff;
}

.card button {
  background: #ff9800;
  color: #000;
}

.card a:hover { background: #1e88e5; }
.card button:hover { background: #ffb74d; }

footer {
  text-align: center;
  padding: 20px;
  background: rgba(0,0,0,0.8);
  font-size: 14px;
  color: #ccc;
}
footer span { color: #ff9800; font-weight: bold; }
</style>
</head>

<body>

<header>
  <h1>GameVault</h1>
  <p>Les meilleurs jeux PC payants</p>

  <div class="search-box">
    <input type="text" id="search" placeholder="Rechercher un jeu PC...">
    <span>üîç</span>
  </div>
</header>

<div class="notice" id="notice"></div>
<div class="grid" id="games"></div>

<footer>
  ¬© <span id="year"></span> GameVault ‚Äî Cr√©√© par <span>ABOGOURIN Fayad</span>
</footer>

<script>
const container = document.getElementById("games");
const notice = document.getElementById("notice");
const searchInput = document.getElementById("search");
let allGames = [];

/* ===== AFFICHAGE ===== */
function displayGames(list) {
  container.innerHTML = "";
  list.forEach(game => {
    container.innerHTML += `
      <div class="card">
        <img src="${game.img}">
        <h3>${game.name}</h3>
        <a target="_blank" href="https://store.steampowered.com/search/?term=${encodeURIComponent(game.name)}">
          Voir sur Steam
        </a>
        <button onclick="window.open('TON_LIEN_MOMO','_blank')">
          Payer via MoMo
        </button>
      </div>`;
  });
}

/* ===== MODE LOCAL (double-clic) ===== */
if (location.protocol === "file:") {
  notice.innerText = "Mode local activ√© ‚úîÔ∏è (vitrine)";
  allGames = [
    {name:"GTA V", img:"https://images.igdb.com/igdb/image/upload/t_cover_big/co1tmu.jpg"},
    {name:"Red Dead Redemption 2", img:"https://images.igdb.com/igdb/image/upload/t_cover_big/co1q1f.jpg"},
    {name:"Elden Ring", img:"https://images.igdb.com/igdb/image/upload/t_cover_big/co4jni.jpg"},
    {name:"Cyberpunk 2077", img:"https://images.igdb.com/igdb/image/upload/t_cover_big/co7497.jpg"},
    {name:"Call of Duty MW III", img:"https://images.igdb.com/igdb/image/upload/t_cover_big/co6w0y.jpg"}
  ];
  displayGames(allGames);

/* ===== MODE EN LIGNE (RAWG) ===== */
} else {
  notice.innerText = "Chargement des jeux PC...";
  fetch("https://api.rawg.io/api/games?key=e39901f1a1d3498a91dabddb6383bb23&platforms=4&page_size=40")
    .then(res => res.json())
    .then(data => {
      allGames = data.results
        .filter(g => g.background_image)
        .map(g => ({ name: g.name, img: g.background_image }));
      displayGames(allGames);
      notice.innerText = "Jeux PC charg√©s ‚úîÔ∏è";
    })
    .catch(() => {
      notice.innerText = "Erreur de chargement des jeux ‚ùå";
    });
}

/* ===== RECHERCHE ===== */
searchInput.addEventListener("input", () => {
  const value = searchInput.value.toLowerCase();
  displayGames(allGames.filter(g => g.name.toLowerCase().includes(value)));
});

/* ===== ANNEE DYNAMIQUE FOOTER ===== */
document.getElementById("year").textContent = new Date().getFullYear();
</script>

</body>
</html>